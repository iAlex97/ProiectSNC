\documentclass[12pt,english]{article}
\usepackage[a4paper,bindingoffset=0.2in,%
            left=1in,right=1in,top=1in,bottom=1in,%
            footskip=.25in]{geometry}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{color}
\usepackage{float}

\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\lstset{frame=tb,
  language=C++,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=none,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3
}

\graphicspath{ {./figures/} }

\title{Proiect SNC}
\date{2019\\ Octombrie}
\author{Pangratie Andrei - 342 B3\\Ionescu Alexandru Cristian - 342 B3}

\begin{document}

\maketitle
\newpage

\tableofcontents
\newpage

% Section 1
\section {Pregatire experiment identificare }
% \begin{table}[H]
%   \centering
%   \begin{tabular}{|l|l|l|l|}
%     \hline
%     head1 & head2 & head3 & head4 \\
%     \hline
%     row11 & row12 & row13 & row13 \\
%     \hline
%     row11 & row12 & row13 & row13 \\
%     \hline
%     row11 & row12 & row13 & row13 \\
%     \hline
%     row11 & row12 & row13 & row13 \\
%     \hline
%   \end{tabular}
%   \caption{Dataset description of the four datasets provided by Rabobank Group ICT.}
% \end{table}

\begin{table}[H]
  \centering
  \begin{tabular}{|l|l|l|l|}
    \hline
    $instalatie$ & $u_0$ & $\Delta u$ \\
    \hline
    presiune & 70[\%] & 10 [\%] \\
    \hline
  \end{tabular}
  \caption{Date initiale}
\end{table}

\subsection {Platforma laborator 3 de citit }
	Am citit laboratorul.

\subsection {Se studiaza fisa de activități }
	Am studiat fisa de activitati.

\subsection {Raspuns indicial }
\subsubsection {Grafice raspuns indicial (comanda si iesire) }
	\begin{center}
	  \fbox{ \includegraphics[width=1\textwidth]{1_3_1.eps}}
	\end{center}

\subsubsection {[1p] Comentarii referitor grafice obtinute }
\subsection {Datele masurate salvate }
\subsection {Caracteristici proces }
\begin{table}[H]
  \centering
  \begin{tabular}{|l|l|l|l|}
    \hline
    $t_c$ & $t_t$ & $\tau$ & $T_e\ ales$ \\
    \hline
    3.00 [s] & 3.2538 [s] & 0.2 [s] & 0.33 [s] \\
    \hline
  \end{tabular}
  \caption{Caracteristici proces alese experimental.}
\end{table}

\subsection {Rezolvare aplicatii laboratorul 3 }
Am ales urmatoarele proprietati pentru SPAB:
\begin{table}[h!]
  \centering
    \begin{tabular}{|l|l|l|l|}
      \hline
      $N$ & $p$ \\
      \hline
      9 & 2 \\
      \hline
    \end{tabular}
    \caption{SPAB}
\end{table}

\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{1_6_1.eps}}
\end{center}

Algoritm generare SPAB:
\begin{lstlisting}
  uint32_t reg = 0b11111 1111; 

  int nr_val = 48; 

  for (int i = 0; i < nr_val; i++) { 
      std::cout << (reg & 1) << ", "; 
      uint8_t last_bit = !!((1 << 0) & reg) != !!((1 << 4) & reg); 
      reg >>= 1; 
      reg = reg | (last_bit << 8); 
  } 

  std::cout << std::endl;
\end{lstlisting}

Pentru vectorul initial:
\begin{lstlisting}
  0b11111'1111
\end{lstlisting}

Primele 48 valori:
\begin{lstlisting}
  1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1
\end{lstlisting}

Spab generat manual:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{1_6_2.eps}}
\end{center}
Fft spab generat manual:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{1_6_3.eps}}
\end{center}

% Section 2
\section {Realizare si analiza experiment identificare }
\subsection {Expresia Matlab de generare a semnalului SPAB }
\begin{lstlisting}
  idinput(510, 'PRBS', [0 1/2], [6 8])
\end{lstlisting}

\subsection {[2p] Caracteristici semnal SPAB de intrare }
\begin{table}[H]
  \centering
  \begin{tabular}{|l|l|l|l|}
    \hline
    Tip semnal aleator & Lungime set date & Durata experiment & Banda de frecvente \\
    \hline
    SPAB & 762 & 251.46 [s] & $\pm 3Hz$ \\
    \hline
  \end{tabular}
  \caption{Caracteristici semnal SPAB}
\end{table}

\subsection {[3p] Afisare spectrul semnal SPAB de intrare }
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{2_3_1.eps}}
\end{center}

\subsection { [1p] Observatii asupra semnalului SPAB generat }
\subsection { Realizare experiment identificare (conform instructiunilor din laborator) }
Am realizat experimentul de identificare.
\subsection { Fisier rezultate identificare }
Numele fisierului este 'B70\_DateExper.mat'. Fiserul este de tip .mat in care este salvat o structura tip iddata care contine intrarea, iesirea si configurarea unor parametri (exp Te).
\subsection { [3p] Afisare spectrul semnal SPAB de iesire (achizitionat) }

\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{2_7_1.eps}}
\end{center}

\subsection {[1p] Observatii asupra semnalului achizitonat }
Se observa favorizarea unor alte frecvente (in afara de 0Hz)

% Section 3
\section {IDENTIFICARE SI VALIDARE MODEL MATLAB }
\subsection {Platforma laborator 4 - citită}
\subsection {[2p+1p+2p] Rezolvare Aplicatii Lab 4 }
\subsubsection {Cum se determina daca un model este liniar sau neliniar?}
Se determina prin stimularea procesului cu diferite intrari de tip treapta pozitiva sau negativa de diferite amplitudini. Daca amplificarea statica a procesului $k_p = \dfrac{y_{stationar}}{u_{stationar}}$ are valori diferite, sau daca timpii de crestere sunt diferiti, atunci este vorba de un model neliniar

\subsubsection {Diferente intre ARIMAX si ARMAX}
Diferenta consta in filtrul perturbatiei $v$. Pentru modelul ARIMAX filtrul este $\dfrac{1}{C(q^-1)A(q^-1)}$, iar pentru ARMAX acesta este $\dfrac{C(q^-1)}{A(q^-1)}$.

\subsubsection {Intrebare pertinenta}
In ce masura ar putea fii un model real aproximat de modele de diferite tipuri pe portiuni. Spre exemplu, in ce masura ar putea un model sa isi modifice comportamentul pe masura ce timpul trece sub actiunea unei comenzi de tip treapta.

\subsection {Filtrare semnale achiziționate in urma experimentului de identificare. }
\subsubsection {Functii Matlab apelate pentru filtrari: }
\begin{lstlisting}
  idata = iddata(data.IOData.signals(1).values, data.IOData.signals(2).values, 0.33)
  tr = getTrend(idata, 1)
  data_d = detrend(idata, tr);

  [b, a] = butter(1, 0.2)
  flt_data = filter(b, a, data_d.OutputData)
  plotFreq(flt_data, 0.33)
\end{lstlisting}
\subsubsection {[2p] Spectru semnale filtrate: }
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_3_2.eps}}
\end{center}
\subsubsection {[1p] Comentarii asupra spectrului }
Spectrul ajunge sa piarda frecventele afectate de filtru, insemnand ca o parte din zgomote sunt filtrate si cel mai observabil acesta pierde spike-ul in urma modificarii ofsetului.
\subsection {Seturile de date de identificare Matlab - iddata pentru identificare si validare. }
\begin{lstlisting}
length(flt_data) % 762
eData = flt_data(1:508)
vData = flt_data(509:762)
\end{lstlisting}

\subsubsection {eData  (upload) }
\begin{lstlisting}
save("70BY_IdentData", "eData");
\end{lstlisting}
\subsubsection {vData  (upload) }
\begin{lstlisting}
save("70BY_ValidationData", "vData");
\end{lstlisting}
\subsection {[2p] Estimarea complexității model ARX }
\begin{lstlisting}
flt_idata = iddata(flt_data, data_d.InputData, 0.33)
e_idata = iddata(eData, data_d.InputData(1:508), 0.33)
v_idata = iddata(vData, data_d.InputData(509:762), 0.33)
\end{lstlisting}

\subsubsection {Utilizare functie advice: }
\begin{lstlisting}
General data characteristics:
-----------------------------
This is a time domain data set with 1 input(s) and 1 output(s),
762 samples and 1 experiment(s).

All inputs in the data have been denoted as 'zero order hold' ('zoh'), i.e. they are
assumed to be piecewise constant over the sample time.
If the input is a sampled continuous signal and you plan to build or convert to
continuous-time models, it is recommended to mark the InterSample property as
'First order hold': Data.InterSample = 'foh' or Data.int = {'foh','foh', ...} for
multi-input signals.


Some inputs and/or outputs have non-zero means. It is generally recommended to
remove the means by DAT = DETREND(DAT), except in the following cases:
1. The signals are measured relative to a level that corresponds to a
   physical equilibrium. This could e.g. be the case if step responses
   are recorded from an equilibrium point. In this case, it is advisable
   to remove the equilibrium values rather than data means. You may do so
   using a TrendInfo object with DETREND command, or during estimation using
   the "InputOffset" and "OutputOffset" estimation options.
2. There is an integrator in the system, and the input and output 
   levels are essential to describe the effect of the integration.
3. You are going to use the data to estimate nonlinear ARX models.

Excitation level in data:
-------------------------
The input is persistently exciting of order 50. This means that you
will encounter problems if estimating models of order higher than 50.

Possibility of feedback in data:
--------------------------------
There is a very strong indication of feedback in the data.
You should be careful when interpreting the results of SPA and also interpret
the results of output error models with care (Output error models result from
the OE command or setting 'DisturbanceModel'= 'None' in state-space models.).
With feedback in data, it is recommended to use estimate a model with large enough 
disturbance component. For example, use BJ models in place of OE models and estimate 
state space models using 'DisturbanceModel'= 'Estimate'. Also N4SID estimation using 
N4Weight = "SSARX" works better than other N4Weight options in handling data 
containing feedback.

Possibility of nonlinearity:
----------------------------
There is no clear indication of nonlinearities in this data set.
Use the "isnlarx" command to perform the assessment of nonlinearity with more options.

\end{lstlisting}

\subsubsection {Utilizare functie delayest: }
\begin{lstlisting}
ans =

     2
\end{lstlisting}

\subsubsection {Estimare complexitate model ARX }
\begin{lstlisting}
NN = struc(1:10,1:10,0:2);
V = arxstruc(e_idata, v_idata, NN)
nn = selstruc(V)
\end{lstlisting}

\begin{table}[H]
  \centering
    \begin{tabular}{|l|l|l|l|}
      \hline
      $nA$ & $nB$ & $nk$ \\
      \hline
      9 & 2 & 1 \\
      \hline
    \end{tabular}
    \caption{Caracteristici proces alese experimental.}
\end{table}

\subsection {Identificare model ARX }
Am adaugat asta aici 
\begin{lstlisting}
>> sys_arx = arx(flt_idata, nn)
\end{lstlisting}

\subsubsection {Descriere model obținut (structură, coeficienți, etc) }
\[ y[k] = q^-1 \dfrac{B(q^-1)}{A(q^-1)}u[k] + \dfrac{1}{A(q^-1)}e[k] \]

\begin{lstlisting}
A = [1 -1.545 1.271 -1.086 0.9689 -0.8194 0.669 -0.4828 0.265 -0.09378]
B = [0.01325 0.04868]
na=9   nb=2   nk=1
\end{lstlisting}
\subsubsection {Valorile funcțiilor criteriu }
\begin{lstlisting}
FPE: 0.005476, MSE: 0.005196
\end{lstlisting}
\subsubsection {Figurile obținute in urma validării ( resid \& compare) (vezi App Laborator 4) }
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_6_3_1.eps}}
\end{center}
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_6_3_2.eps}}
\end{center}
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_6_3_3.eps}}
\end{center}
\subsection {[3p] Identificare model ARMAX }
\begin{lstlisting}
>> sys_armax = armax(flt_idata, [nn(1) nn(2) 3 nn(3)])
\end{lstlisting}
\subsubsection {Descriere model obținut (structură, coeficienți, etc) }
\[ y[k] = q^-1 \dfrac{B(q^-1)}{A(q^-1)}u[k] + \dfrac{C(q^-1)}{A(q^-1)}e[k] \]

\begin{lstlisting}
A = [1 -1.552 0.8733 -0.1739 -0.01457 -0.009968 0.01775 0.01726 0.05527 0.02293]
B = [0.01618 0.04298]
C = [1 -0.04761 -0.6452 0.3978]
na=9   nb=2   nc=3   nk=1
\end{lstlisting}
\subsubsection {Valorile funcțiilor criteriu }
\begin{lstlisting}
FPE: 0.004659, MSE: 0.004386
\end{lstlisting}
\subsubsection {Figurile obținute in urma validării ( resid \& compare) (vezi App Laborator 4) }
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_7_3_1.eps}}
\end{center}
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_7_3_2.eps}}
\end{center}
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_7_3_3.eps}}
\end{center}
\subsection {[3p] Identificare model BJ }
\begin{lstlisting}
>> sys_bj = bj(flt_idata, [nn(2) 5 6 6 nn(3)])
\end{lstlisting}
\subsubsection {Descriere model ales (structură, coeficienți, etc) }
\[ y[k] = q^-1 \dfrac{B(q^-1)}{F(q^-1)}u[k] + \dfrac{C(q^-1)}{D(q^-1)}e[k] \]

\begin{lstlisting}
B = [0.01618 0.04298]
C = [1 -0.04761 0.6452 0.3978]
D = [1 -1.492 1.314 -0.8559 -0.12 0.1427 0.04877]
F = [1 -1.75 1.319 -0.54 0.001966 0.188 -0.1157]
nb=2   nc=5   nd=6   nf=6   nk=1
\end{lstlisting}
\subsubsection {Valorile funcțiilor criteriu }
\begin{lstlisting}
FPE: 0.004628, MSE: 0.004266
\end{lstlisting}
\subsubsection {Figurile obținute in urma validării ( resid \& compare) (vezi App Laborator 4) }
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_8_3_1.eps}}
\end{center}
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_8_3_2.eps}}
\end{center}
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_8_3_3.eps}}
\end{center}
\subsection {[3p] Identificare model OE }

\begin{lstlisting}
>> sys_oe = oe(flt_idata, [nn(2) 9 nn(3)]) 
\end{lstlisting}
\subsubsection {Descriere model ales (structură, coeficienți, etc) }
\[ y[k] = q^-1 \dfrac{B(q^-1)}{F(q^-1)}u[k] + e[k] \]

\begin{lstlisting}
B = [0.01363 0.04363]
F = [1 -1.622 1.043 -0.3599 0.2136 -0.5075 0.8735 -0.896 0.4862 0.1123]
nb=2   nf=9   nk=1
\end{lstlisting}
\subsubsection {Valorile funcțiilor criteriu }
\begin{lstlisting}
FPE: 0.02042, MSE: 0.01937
\end{lstlisting}
\subsubsection {Figurile obținute in urma validării ( resid \& compare) (vezi App Laborator 4) }
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_9_3_1.eps}}
\end{center}
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_9_3_2.eps}}
\end{center}
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_9_3_3.eps}}
\end{center}

\subsection {Alegere Model Final Matlab }
Raspuns indicial model:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_10_1.eps}}
\end{center}
Raspuns indicial real:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_10_2.eps}}
\end{center}
\subsubsection {Descriere model ales (structură, coeficienți, etc) }
\[ y[k] = q^-1 \dfrac{B(q^-1)}{A(q^-1)}u[k] + \dfrac{C(q^-1)}{A(q^-1)}e[k] \]

\begin{lstlisting}
A = [1 -1.552 0.8733 -0.1739 -0.01457 -0.009968 0.01775 0.01726 0.05527 0.02293]
B = [0.01618 0.04298]
C = [1 -0.04761 -0.6452 0.3978]
na=9   nb=2   nc=3   nk=1
\end{lstlisting}
Modelul ARMAX are precizia usor mai mica decat modelul BJ, dar acesta este considerabil mai simplu.

\subsubsection {Valorile funcțiilor criteriu }
\begin{lstlisting}
FPE: 0.004659, MSE: 0.004386
\end{lstlisting}
\subsubsection {Figurile obținute în urma validării (resid \& compare) }
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_7_3_1.eps}}
\end{center}
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_7_3_2.eps}}
\end{center}
\subsubsection {[1p] Studiul stabilității sistemului: }
Systemul este stabil:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_10_4_1.eps}}
\end{center}
\subsubsection {Modelul Matlab ales încărcat este disponibil}
Atasat proiectului
\subsubsection {Comentarii/Observații }
In afara de OE toate celelalte modele se apropie comparabil de mult cu procesul masurat. ARMAX si BJ sunt mai precise decat ARX, dar Final Precision Error cat si Mean Square Error sunt de acelasi ordin de marime.
TO DO - more?

\section {MODELARE SI IDENTIFICARE FOLOSIND WIMPIM }
\subsection {[1p] Pregătire date inițiale WINPIM. Fisierul txt obtinut (upload) }
Fisierul txt poate fi gasit la urmatorul path: $./modele\_winpim/B70\_date\_win.txt$

\subsection {[1p] Incarcare fisier in WinPIM si specificare perioada de esantionare }
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/winpim_incarcare_1.png}}
\end{center}

\subsection {[1p] Aplicare filtrare set de date (eliminarea componentei continue) }
Am aplicat filtru pentru eliminarea componentei continue:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/b70_dc.png}}
\end{center}

In continuare, am aplicat si un filtru Butterworth:
\begin{equation*}
  H_{B} =\frac{0.2452+0.2452*z^{-1}}{1-0.5095*z^{-1}}
\end{equation*}

\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/b70_butterworth.png}}
\end{center}

Semnalul rezultat a fost salvat la urmatorul path: $./modele\_winpim/B70\_butterworth.dat$

\subsection {[1p] Estimarea complexitatii}

\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/winpim_estimare_1.png}}
\end{center}

\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/winpim_estimare_2.png}}
\end{center}

\begin{table}[H]
  \centering
  \begin{tabular}{|l|l|l|l|}
    \hline
    $N$ & $n_A$ & $n_B$ & $d$ \\
    \hline
    2 & 2 & 1 & 1 \\
    \hline
  \end{tabular}
  \caption{Caracteristici proces alese experimental.}
\end{table}

\subsection {[5p] Identificare si validare modele }
\subsubsection {Identificare si validare modele ARX}
Am variat parametrii pana am obtinut un model ce trecea ambele teste:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/winpim_ident_arx_1.png}}
\end{center}
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/winpim_ident_arx_2.png}}
\end{center}
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/winpim_ident_arx_3.png}}
\end{center}
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/winpim_ident_arx_4.png}}
\end{center}

Testul:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/winpim_ident_arx_4_test1.png}}
\end{center}

Comparatie intre iesirea sistemului si iesirea modelului ARX:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/arx_out.png}}
\end{center}

\subsubsection {Identificare si validare modele OE}
Am variat parametrii:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/winpim_ident_oe_1.png}}
\end{center}
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/winpim_ident_oe_2.png}}
\end{center}
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/winpim_ident_oe_3.png}}
\end{center}
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/winpim_ident_oe_4.png}}
\end{center}

Testul:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/winpim_ident_oe_4_test1.png}}
\end{center}

Comparatie intre iesirea sistemului si iesirea modelului OE:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/oe_out.png}}
\end{center}

\subsubsection {Identificare si validare modele ARMAX}
Am variat parametrii pana am obtinut un model ce trecea ambele teste:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/winpim_ident_armax_212.png}}
\end{center}
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/winpim_ident_armax_313.png}}
\end{center}

Testul:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/winpim_ident_armax_313_test1.png}}
\end{center}

Comparatie intre iesirea sistemului si iesirea modelului ARMAX:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/armax_out.png}}
\end{center}

\subsubsection {Identificare si validare modele ARIMAX}
Am variat parametrii pana am obtinut un model ce trecea ambele teste:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/winpim_ident_arimax_212.png}}
\end{center}

Testul:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/winpim_ident_arimax_212_test1.png}}
\end{center}

Comparatie intre iesirea sistemului si iesirea modelului ARIMAX:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/arimax_out.png}}
\end{center}

\subsection {Modelul ales este anexat aici (BXY.mod) }
Din experimentele de identificare si validare am ajuns la concluzia ca modelele $ARMAX$ si $ARIMAX$ au oferit cele mai bune performante. Dintre acestea, am ales modelul $ARIMAX$ datorita gradului de complexitate mai redus.
Fisierul poate fi gasit la: $./modele\_winpim/arimax.mod$

Model ARIMAX:
\[ y[k] = q^{-1} \dfrac{B(q^-1)}{A(q^-1)}u[k] + \dfrac{C(q^-1)}{A(q^-1)}e[k] \]

\begin{lstlisting}
A = [1 -1.36248 0.61965 -0.09122]
B = [0.06305]
C = [1 -0.28752 -0.05547 0.00307]
na=3   nb=1   nc=3   nk=1
\end{lstlisting}

\subsection {Simulare model ales WinPIM si simulare model ales Matlab }
\subsection {Graficele simularilor sunt disponibile aici }
\subsubsection {Simulare model ARMAX in Matlab }
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{3_10_1.eps}}
\end{center}
\subsubsection {Simulare model ARMAX in WinPIM }
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winpim/sim_armax.png}}
\end{center}
\subsection {Modelul final ales pentru continuarea proiectului este: }
Alegem modelul din WinPIM deoarece are gradele polinoamelor mai mici.
\begin{lstlisting}
A = [1 -1.36248 0.61965 -0.09122]
B = [0.06305]
C = [1 -0.28752 -0.05547 0.00307]
na=3   nb=1   nc=3   nk=1
\end{lstlisting}

\section {CALCUL REGULATOR RST-1, SIMULARE SI VALIDARE }
\subsection {Platforma laborator 6 - citită }
Am citit
\subsection {Obiective de reglare impuse}
\begin{lstlisting}
Tt = 3.2
Te = 0.33
w_min = 0.7616
w_max = 4.7600
zeta = 0.98

s = tf('s')
w = 4 / (zeta * Tt)
Q = w*w / (s^2 + s*2*w*zeta + w^2)
Qd = c2d(Q, Te, 'zoh')
[P Z] = pzmap(Qd)
\end{lstlisting}

\begin{table}[H]
  \centering
    \begin{tabular}{|l|l|}
      \hline
      $t_t$ & $\sigma$ \\
      \hline
      3.2 [s] & 0 \% \\
      \hline
    \end{tabular}
    \caption{Obiective de reglare alese.}
\end{table}

\subsection {Pulsatia naturala si atenuarea echivalente cu obiectivele de reglare impuse: }
\begin{table}[H]
  \centering
    \begin{tabular}{|l|l|}
      \hline
      $\omega_n$ & $\zeta$ \\
      \hline
      1.2755 & 0.98? \\
      \hline
    \end{tabular}
    \caption{Pulsatia naturala si factorul de amoritzare.}
\end{table}

\subsection {Polii dominanti discreti impusi ca urmare a obiectivelor de reglare: }
\begin{table}[H]
  \centering
    \begin{tabular}{|l|l|}
      \hline
      $z_1$ & $z_2$ \\
      \hline
      $0.6597 + 0.0554i$ & $0.6597 - 0.0554i$ \\
      \hline
    \end{tabular}
    \caption{Polii impusi.}
\end{table}

\subsection {Specificare polinom P: }
\begin{table}[H]
  \centering
    \begin{tabular}{|l|l|}
      \hline
      Grad P & 2 \\
      \hline
      $P(q^{-1})$ & $1 + 3.0100*q^{-1} + 2.2821*q^{-2}$ \\
      \hline
    \end{tabular}
    \caption{Polinom}
\end{table}

\subsection {Grade polinoame ecuatia Sylvester }
\begin{table}[H]
  \centering
    \begin{tabular}{|l|l|l|l|l|l|}
      \hline
      $n_A$ & $n_B$ & $n_P$ & $n_R$ & $n_S$ & $d$ \\
      \hline
      3 & 1 & 2 & 2 & 1 & 1 \\
      \hline
    \end{tabular}
    \caption{Grade}
\end{table}

\subsection {Matricea M asociata : }
\begin{center}
  \begin{equation*}
  M=\begin{bmatrix}
  1 & 0 & 0 & 0 & 0\\
  a_{1} & 1 & 0 & 0 & 0\\
  a_{2} & a_{1} & b_{1} & 0 & 0\\
  a_{3} & a_{2} & 0 & b_{1} & 0\\
  0 & 0 & 0 & 0 & b_{1}
  \end{bmatrix} =\begin{bmatrix}
  1 & 0 & 0 & 0 & 0\\
  -1.3625\  & 1 & 0 & 0 & 0\\
  0.6197 & -1.3625 & 0.0630 & 0 & 0\\
  -0.0912 & 0.6197 & 0 & 0.0630 & 0\\
  0 & 0 & 0 & 0 & 0.0630
  \end{bmatrix}
  \end{equation*}
\end{center}

\subsection {Solutia ecuatiei}
Folosind notatiile:
\begin{center}
  \begin{gather*}
  x^{T} =[ 1\ s_{1} \ \vdots \ r_{0} \ r_{1} \ r_{2}]\\
  p^{T} =[ 1\ p_{1} \ p_{2} \ \vdots \ 0 \ 0]
  \end{gather*}
\end{center}

Inlocuim si rezolvam sistemul:
\begin{center}
  \begin{equation*}
  x=M^{-1} p=\begin{bmatrix}
  1\\
  2.3625\\
  51.6868\ +\ 0.8784i\\
  -21.7715\ \\
  0
  \end{bmatrix}
  \end{equation*}
\end{center}

\subsection {Pentru ca sistemul sa ofere timp de raspuns minim si suprareglaj < 5\% se aleg:}
$s = [2.3625]$
$r = [51.6868 - 0.8784i\ \ -21.7715 + 0.0000i\ \ 0.0000 + 0.0000i]$
\subsection {Simulare sistem in bucla inchisa (comanda, referinta, iesirea), in conditii de perturbatii treapta (25\% amplitudine) aplicate dupa stabilizarea sistemului fata de referinta. Graficele sunt prezentate aici: }
\subsection {Observatii legate de rezultatele obtinute: }

\subsection {Specificare polinom P: }
\subsection {Grade polinoame ecuatia Sylvester }
\subsection {Matricea M asociata : }
\subsection {Solutia ecuatiei}
\subsection {Simulare sistem in bucla inchisa (comanda, referinta, iesirea), in conditii de perturbatii treapta (25\% amplitudine) aplicate dupa stabilizarea sistemului fata de referinta. Graficele sunt prezentate aici: }
\subsection {Observatii legate de rezultatele obtinute: }

\section {PROIECTARE REGULATOR RST-1 - WINREG }
\subsection {Specificare performante in urmarire respectiv in reglare: }
\begin{table}[H]
  \centering
    \begin{tabular}{|l|l|l|}
      \hline
       & $\omega_n$ & $\zeta$ \\
      \hline
       Reglare & 1.3605 & 0.98 \\
      \hline
       Urmarire & 0.2700 & 0.9 \\
      \hline
    \end{tabular}
    \caption{Performante impuse}
\end{table}

Am introdus aceste valori in WinReg, dupa cum urmeaza:
\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winreg/6_1_1.png}}
\end{center}

\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winreg/6_1_2.png}}
\end{center}

\subsection {Pentru regulatorul calculat folosind metoda Pole Placement, cu integrator, polinoamele R,S,T sunt: }
\begin{table}[H]
  \centering
    \begin{tabular}{|l|l|}
      \hline
       $R(q^{-1})$ & $0.007993q^{-2}-0.897038q^{-1}+0.993165$\\
      \hline
       $S(q^{-1})$ & $q^{-2}-0.75029q^{-1}-0.24971$\\
      \hline
       $T(q^{-1})$ & $14.204545q^{-2}-26.200142q^{-1}+12.099716$\\
      \hline
       $B_m(q^{-1})/A_m(q^{-1})$ & $(0.03048q^{-1} + 0.02556)/(q^{-2}-1.533754q^{-1}+0.589793)$ \\
      \hline
    \end{tabular}
    \caption{Polinoame regulator}
\end{table}

\begin{center}
  \fbox{ \includegraphics[width=0.8\textwidth]{winreg/6_2_1.png}}
\end{center}

\subsection {Fisierul WinReg cu regulator si model este aici. }


\subsection {Simulare sistem in bucla inchisa (comanda, referinta, iesirea), in conditii de perturbatii treapta (25\% amplitudine) aplicate dupa stabilizarea sistemului fata de referinta. Graficele sunt prezentate aici: }
\subsection {Observatii legate de rezultatele obtinute: }

\section {EVALUARE EXPERIMENTALA REGULATOR RST-1 }
a
\subsection {7.1. Evaluare performante pe sistemul real. }
\subsubsection {Se alege referinta r(t) = a.i. u(t) stationar sa fie egal cu u0. Pentru aceasta referinta s-a stimulat sistemul si s-a aplicat si o perturbatie cand a ajuns in regimul stationar de cca.}
\subsubsection {Rezultatul simularii se afla in imaginea de mai jos: }
\subsubsection {[2p] Alegand o alta referinta raspunsul sistemului este capturat in figura de mai jos: }
\subsection {7.2. Performantele se regasesc rezumate in tabelul urmator }
\subsection {7.3. Comentarii privind calitatea solutiei obtinute vs specificatiile impuse: }

\section {CALCUL REGULATOR RST-2, SIMULARE SI VALIDARE }
a
\subsection {8.1. Platforma laborator 8 - citită }
\subsection {8.2. [2p] Regulatorul RST 1 si-a indeplinit sau nu performantele impuse ?  Daca nu, ce masuri se iau (ce specificatii noi se impun fata de primul design ) ? }
\subsection {8.3. [4p] Regulatorul RST 1 indeplineste marginile standard de robustete (se pot verifica cu aplicatia WinPIM)?   Figura cu functia de sensibilitate si template este furnizata aici. }
\subsection {8.4. [4p] In cazul in care regulatorul a trebuit recalculat acesta este descris de polinoamele: }
\subsection {8.5. [2p] Rezultatele in simulare sunt furnizate in figura urmatoare: }
\subsection {8.6. [2p] Functia de sensibilitate a noii solutii: }

\section {Evaluare Experimentala Regulator RST-2 }
a
\subsection {9.1. [3p] Evaluare performante pe sistemul real. }
\subsubsection {Se alege referinta r(t) = a.i. u(t) stationar sa fie egal cu u0. Pentru aceasta referinta s-a stimulat sistemul si s-a aplicat si o perturbatie cand a ajuns in regimul stationar de cca.\% }
\subsubsection {Rezultatul simularii se afla in imaginea de mai jos: }
\subsubsection {[2p] Alegand o alta referinta raspunsul sistemului este capturat in figura de mai jos: }
\subsection {9.2.[2p] Performantele se regasesc rezumate in tabelul urmator }
\subsection {9.3.[1p] Comentarii privind calitatea solutiei obtinute vs specificatiile impuse: }

\section {CONCLUZII GENERALE SI FEEDBACK PROIECT }
a
\subsection {Concluzii legate de solutia de reglare calculata }
\subsection {Feedback legat de desfasurare/ continut proiect }

\end{document}
